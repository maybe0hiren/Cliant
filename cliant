#!<PROJECT DIRECTORY>/Cliant/env/bin/python

import os
from dotenv import load_dotenv
from google import genai

#Code Setup
load_dotenv()
LLM = os.getenv("GEMINI_KEY")
if not LLM:
    raise RuntimeError("LLM not reachable")
client = genai.Client(api_key=LLM)
modelName = "models/gemini-2.5-flash"

#Get relevant system information
def getReqSysInfo(userMessage):
    prompt = f"""
            You are a decent experience user of Arch Linux System.
            The user wants to execute a task in the CLI.
            Here is the task {userMessage}
            Tell me the system information required generate the command to execute the task
            Don't act like an annoying geek that asks fro a bunch of information just to intimidate a person.
            Don't try to make your answer too human friendly just a bunch of system information points separated by commas.
        """ 
    response = client.models.generate_content(
        model=modelName,
        contents=prompt,
    )
    return response.text.strip()    

#Change the specs retrieval/fetching
def llmInteraction(task):
    specs = os.getenv("SPECS")
    prompt = f"""
            You are a master in Arch Linux command line.
            These are my device specifications:
            {specs}
            Give me the command for this task:
            {task}
            Only output the command
        """ 
    response = client.models.generate_content(
        model=modelName,
        contents=prompt,
    )
    return response.text.strip()


def main():
    try:
        while True:
            task = input("> ")
            command = getReqSysInfo(task)
            print(command)            
    except KeyboardInterrupt:
        print("\nTerminated...")


if __name__  == "__main__":
    main() 